To create individual users:
===========================

**Run everything from /opt/aw/user.

1. Run RandomDotSeparatedString to create both the username and password.
      
     ../thirdparty/jre1.6.0_17/bin/java -cp lib/*:classes org.andwellness.awuser.RandomDotSeparatedString data/username-words.txt

2. Edit user/add-remove-user.properties 

3. Run ManageUser

   ../thirdparty/jre1.6.0_17/bin/java -cp lib/*:classes org.andwellness.awuser.ManageUser add data/add-remove-user.properties '$2a$04$r8zKliEptVkzoiQgD833Oe' 

To create a batch of users with the same password (test.password)
=================================================================
There are 2 scripts that can be used (shell, and python)

For shell script
----------------
1. copy the shell script to /opt/aw/user/data

2. modify the following value in /opt/aw/user/data/add-users.sh
2.1. modify the campaignid at the beginning of the script. By default,
the campaignid is 1.
2.2. range of users at the bottom of the script. For example {0..99}
will create user 0 (testuser.a) to user 99 (testuser.jj)

3. Run add-users.sh by 
3.1 cd /opt/aw/user 
3.2. data/add-users.sh 

For python script
------------------

1. copy the python script to /opt/aw/user/data

2. modify the following value in /opt/aw/user/data/add-users.py
2.1. modify the campaignid at the beginning of the script. By default,
the campaignid is 1.
2.2. modify the start_id and end_id at the beginning of the script. 
For example start_id=0, end_id=100 will create user 0 (testuser.a) to user
99 (testuser.jj)

3. Run add-users.sh by 
3.1 cd /opt/aw/user 
3.2. python data/add-users.py


To add classes and other objects into the system
------------------------------------------------
3 scripts are provided. 
1. addDelUtil.sh is a untility script that add and delete the following objects from the database. 
2. addobjects.sh provides an example on how to add/delete objects using addDelUtil.sh 
3. bcryptHashpw.py a python script to hash the plaintext password. This script assumes that a python library (i.e. python_bcrypt) is available in the system. 
Note: To avoid installing the library, user_nohash_add is provided with limitation (See below). 
 
* user
** user_add <login> <password> <campaign_creation_privilege=[0|1]>
   Ex: user_add testuser.aa test.password 1   
   Note: The above example will allow user to create campaign
** user_nohash_add <login> <password> <campaign_creation_privilege=[0|1]>
   Assuming <password> is already hashed. Appropriate bcrypt hash for "test.password" is provided in the example. 
   Ex: user_nohash_add testuser.aa '$2a$04$r8zKliEptVkzoiQgD833Oe9z6hJwbvD6V4W/kPqcJZ5cwF.TpKE7u' 1
** user_del <login_id> 
   Ex: user_del testusre.aa
** user_batch_add <start_id> <end_id> <privilege> 
   Ex: user_batch_add 10 14 PRIVILEGED
** user_nohash_batch_add <start_id> <end_id> <privilege>
   This function will call user_nohash_add to add a bcrypt hash of "test.password" into the system
   Ex: user_nohash_batch_add 10 14 PRIVILEGED
** user_batch_del <start_id> <end_id>
   Ex: user_batch_del 10 14

* class
** class_add <urn> <name> <properties_json>
   Ex: class_add urn:class:ca:lausd:ADDAMS_HS:CS101:Fall:2011 ADDAMS_HS_CS101_Fall_2011 '{"state":"CA", "district":"LAUSD", "school":"Addams High School", "class":"CS101", "term":"Fall", "year":2011}'
** class_del <urn>
   Ex: class_del urn:class:ca:lausd:ADDAMS_HS:CS101:Fall:2011 ADDAMS_HS_CS101_Fall_2011

* user_class
** user_class_add <user_login> <class_urn> <class_role:{SUPERVISOR|NORMAL}>
   Ex: user_class_add testuser.aa  urn:class:ca:lausd:ADDAMS_HS:CS101:Fall:2011 SUPERVISOR
** user_class_del <user_login> <class_urn>
   Ex: user_class_del testuser.aa  urn:class:ca:lausd:ADDAMS_HS:CS101:Fall:2011 

* user_personal
** user_personal_add <login_id> <email_address> <info_json>
   Ex: user_personal_add testuser.aa testuser.aa@test.org '{"firstname":"testuser.aa"}' 
** user_personal_del <user_login> <email_address>
   Ex: user_personal_del testuser.aa testuser.aa@test.org 

* campaign
** campaign_add <urn> <name> <description> <running_state="running"|"stopped"> <privacy_state="private"|"shared"> <timestamp> <location_of_xml_file_on_server>
  Ex: campaign_add "urn:campaign:ca:lausd:ADDAMS_HS:CS202:Fall:2011:media" "CS202_Fall_2011_Media" '{"objective":"analyze advertisement pattern in the community"}' "running" "private" "2011-03-16 23:16:57" "/opt/aw/campaigns/advertisement.xml"
** campaign_del <urn>
  Ex: campaign_del "urn:campaign:ca:lausd:ADDAMS_HS:CS101:Fall:2011:advertisement"

* user_role_campaign
** user_role_campaign_add <user_login> <campaign_urn> <role=supervisor|author|participant|analyst>
   Ex: user_role_campaign_add testuser.aa urn:campaign:ca:lausd:ADDAMS_HS:CS101:Fall:2011:advertisement author
** user_role_campaign_del <user_login> <campaign_urn> <role=supervisor|author|participant|analyst>
   Ex: user_role_campaign_del testuser.aa urn:campaign:ca:lausd:ADDAMS_HS:CS202:Fall:2011:advertisement author

* campaign_class
** campaign_class_add <campaign_urn> <class_urn>
  Ex: campaign_class_add "urn:campaign:ca:lausd:Addams_HS:CS101:Fall:2011:Advertisement" urn:class:ca:lausd:Addams_HS:CS101:Fall:2011
** campaign_class_del <campaign_urn> <class_urn>
  Ex: campaign_class_del "urn:campaign:ca:lausd:Addams_HS:CS101:Fall:2011:Advertisement" urn:class:ca:lausd:Addams_HS:CS101:Fall:2011

* a utility to create users based on role combination, add users, user_class, and roles
** gen_user_user_class_roles <login_prefix> <campaign_urn> <class_urn> 
 Generate all combinations of roles for a user and perform the following functions:
 *** add user.  If want to skip adding user, define skip_user=true before the function.
 *** add user_class. If want to skip adding user_class, define skip_user_class=true befor the function.
 *** add user_role_campaign. If want to skip adding roles, define skip_role=true before the function.
 Ex: skip_user=true skip_user_class=true gen_user_user_class_roles ... 

* delete utility : to delete all users, classes, campaigns which will subsequently remove all entries in user_class, campaign_class, user_role_campaigns
  Ex: delete_all_users_classes_campaigns 

